/*!
* doo.html.min.js
* ===============
* ver. 0.90.4-beta
* JavaScript WebComponent Framework
* Copyright © 2019-2023 Henrik Javen
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*	http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
(()=>{"use strict";var __webpack_modules__={"./src/Doo-Config.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ DooConfig)\n/* harmony export */ });\nclass DooConfig {\n    static DATA_BIND ='bind'\n    static TEMPLATE_EXT = '.html'\n    static COMPONENT_DIR = '/components'\n    static NAME ='DooHTML'\n    static TYPE = {DEFAULT:0,ENUM:1,DEEP:2,COMPUTED:3 }\n    static MATCH = {ANY:-1,STARTS_WITH:0,EXACT:1}\n    static DELIMITER = {'BEG':'{{','END':'}}'}\n    static DOCUMENT =  'document'\n    static SHADOW = 'shadow'\n    static FLEX_BODY = '.fbody'\t\n    static PAGE_SIZE = 12\n    static DATA_STORE='data-store'\n    static DATA_KEY='data-key'\n    static DATA_SCROLL_CONTAINER='.fbody'\n    static DATA_SCROLL_HEADER='.fhead'\n\n\n}\n\n//# sourceURL=webpack://doo-build/./src/Doo-Config.js?")},"./src/Doo-HTML.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"DooHTML\": () => (/* binding */ DooHTML),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Doo_Config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Doo-Config */ \"./src/Doo-Config.js\");\n/*!\n doo.html.min.js\n ===============\n * JavaScript WebComponent Framework\nCopyright © 2019-2023 Henrik Javen\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n\thttp://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nclass DooHTML extends HTMLElement {\n\tstatic get version() {return 'v0.90.4-beta'}\n\n\tstatic define(klass, alias=null) {\n\t\tlet name = alias || klass.name.toLowerCase()\n\t\tcustomElements.define('doo-' + name, klass)\n\t}\t\n\tconstructor(pageSize=_Doo_Config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].PAGE_SIZE) {\n\t\tsuper()\n\t\tthis.PAGE_SIZE = pageSize\t\n\t\tthis.data = {}\n\t\tthis.place = []\n\t\tthis.template = undefined\t\n\t\tthis.visibleColumns = []\n\t\tthis.hasHtml = false\n\t}\n\t//set PAGE_SIZE(pageSize) {this.PAGE_SIZE = pageSize }  // remove handled by props\n\n\tstatic get observedAttributes() {\n\t\treturn ['doo-refresh','data-src','data-key','data-template','bind', 'data-page', 'data-page-size', 'page-size']\n\t}\n\n\tasync attributeChangedCallback(name, oldVal, newVal) {\n\t\t\n\t\t//TODO do we need length???\n\t\tif (newVal.length > 0 && oldVal !== newVal) {\n\t\t\tif (name === 'doo-refresh' && this.dataset.store) {\n\t\t\t\tawait this.render(Doo.X.getData(this.getAttribute('bind')))\n\t\t\t} else if (name === 'page-size') {\n\t\t\t\tthis.PAGE_SIZE = newVal\n\t\t\t} else if (name === 'doo-after-render') {\n\t\t\t\tif (typeof newVal === 'function') {\n\t\t\t\t\tnewVal.call(this)\n\t\t\t\t}\n\t\t\t} else if (name === 'debug') {\n\t\t\t\tDoo.debug = true\n\t\t\t}\t\n\t\t}\t\n\t}\n\tdooParse(argDataNode)  {\n\t\tconst  _xAttr =  ['src', 'selected', 'checked',  'disabled', 'readonly']  \n\n\t\t//TODO remove HTML comments\n\t\t//TODO replace {{}} in <code></code> and <pre></pre> with escaped \"\\{\\{\" \n\t\t//TODO Allow for nested {{templateRoot{{yyy}}zzz}}\n\t\tlet tplNode = argDataNode.cloneNode(true)\n\t\ttplNode.removeAttribute(_Doo_Config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].DATA_BIND)\n\t\t//tplNode.removeAttribute('data-bind')  //TODO remove from lower places\n\t\ttplNode.removeAttribute('data-key')\n\t\t//tplNode.removeAttribute('dynamic')\n\t\tlet htmlStr = tplNode.outerHTML.replace(/\\t/g, '').replace(/\\n/g, '')\n\t\tlet orgStr = htmlStr\n\t\t//covers checked=\"false\" where browser returns true \n\t\t//TODO: check modern browser to see if it still is an issue\n\t\t_xAttr.forEach(item => {\n\t\t\thtmlStr = htmlStr.replace(new RegExp(' ' + item + '=\"{{(.+)}}\"', 'g'), ' doo-' + item + '=\"{{$1}}\"')\n\t\t})\n\t\tlet xHtml = (orgStr === htmlStr)\n\t\t// if (window[this.constructor.name] === undefined) {\n\t\t//     window[this.constructor.name] = []\n\t\t// } \n\t\t//TODO bind(this)\n\t\t// let inst =  window[this.constructor.name].length\n\t\t// htmlStr = htmlStr.split('=\"doo.self.').join('=\"' + this.constructor.name + '[' + inst + '].');\n\t\t// htmlStr = htmlStr.split('=\"self.').join('=\"' + this.constructor.name + '[' + inst + '].');\n\t\t//TODO allow key with no value\n\t\t// if (this.getAttribute('key')) {\n\t\t// \thtmlStr = htmlStr.split(' key ').join(' key=\"{{ i() }}\" ');\n\t\t// }\t\n\t\tlet aHTML = htmlStr.split(_Doo_Config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].DELIMITER.END)\n\t\n\t\tlet templateArray = []\n\t\tlet len = aHTML.length\n\t\tlet aStr\n\t\n\t\tfor (let i=0; i<len; i++) {\n\t\t\tif (_Doo_Config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].DELIMITER.BEG.includes(_Doo_Config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].DELIMITER.BEG)) {\n\t\t\t\taStr =  aHTML[i].split(_Doo_Config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].DELIMITER.BEG)\n\t\t\t\tlet htmlEnd = aStr[0].lastIndexOf('>')\n\t\t\t\tif (i<len-1) {\n\t\t\t\t\tif (htmlEnd === aStr[0].length-1) {\n\t\t\t\t\t\taStr[0] = aStr[0].substring(0,htmlEnd)>\n\t\t\t\t\t\ttemplateArray.push(aStr[0])\t\n\t\t\t\t\t\ttemplateArray.push(`<slot name=\"${aStr[1]}\"></slot>`)\t\t\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttemplateArray.push(aStr[0])\t\n\n\t\t\t\t\t} \n\t\t\t\t\t// else {\n\t\t\t\t\t// \taStr[0] = aStr[0] +'\"' + ` data-attr=\"${aStr[1]}\"`\n\t\t\t\t\t// }\n\t\t\t\t} else {\t\t\n\t\t\t\t\ttemplateArray.push(aHTML[i])\n\t\t\t\t}\t\t\n\t\t\t}\t\n\t\t} \n\t\tlet elem = document.createElement('template')\n\t\telem.innerHTML = templateArray.join('')\n\n\t\t//TODO move to test.assert\n\t\t// console.log('coolio', elem.content.firstElementChild)\n\t\t// console.log('foolio', elem.content.firstElementChild.outerHTML)\n\t\t// let xxx = elem.content.firstElementChild\n\t\t// let data = [{id:1,label:'coolio'}]\n\t\t// let xx = xxx.querySelectorAll('slot')\n\t\t// xx.forEach(i => i.parentElement.textContent = (data[0][i.name]))\n\t\t// console.log('slot', xxx.outerHTML)\n\n\t\n\t\treturn {templateArray, processNode:elem.content.firstElementChild, xHtml}\n\t}\n\t\n\tinitReactiveDataNodes(tplNode) {\n\t\tconst _getNodeLevel = (dataSetElem) => {\n\t\t\tlet level = 0\n\t\t\twhile (dataSetElem.parentElement) {\n\t\t\t\tdataSetElem = dataSetElem.parentElement\n\t\t\t\tlevel++\n\t\t\t}\n\t\t\treturn level;\n\t\t}\n\t\n\t\tthis.dataMap = null\n\t\tthis.flex = null\n\t\tif (this.hasAttribute('data-map')) {\n\t\t\tif (this.getAttribute('data-map').indexOf('Doo.reflect') === 0) {\n\t\t\t\tthis.dataMap = Reflect.ownKeys(DooX.getData(this.getAttribute(_Doo_Config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].DATA_BIND))[0])\n\t\t\t} else {\t\n\t\t\t\tthis.dataMap = this.getAttribute('data-map').split('|')\n\t\t\t}\n\t\t}\n\t\tif (this.hasAttribute('flex')) {\n\t\t\tthis.flex = this.getAttribute('flex').replace('[', '').replace(']', '').split('|')\n\t\t}\n\n\t\tconst replacer = (match, p1) => {\n\t\t\tif (isNaN(p1)) {\n\t\t\t\treturn this.hasAttribute(p1) ? this.getAttribute(p1) : \n\t\t\t\t\t\ttplNode.hasAttribute(p1) ? tplNode.getAttribute(p1) : '';\n\t\t\t} else if (this.dataMap.length > 0) {\n\t\t\t\treturn _Doo_Config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].DELIMITER.BEG + this.dataMap[p1-1] + _Doo_Config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].DELIMITER.END \n\t\t\t}\t\n\t\t}\n\n\t\tlet dynamicNodes = tplNode.content.querySelectorAll('[data-src=\"${data-map}\"]')\n\t\tif (dynamicNodes.length > 0) {\n\t\t\t[...dynamicNodes].forEach( dNode => { \n\t\t\t\tlet colObj = []\n\t\t\t\tthis.dataMap.forEach( (item, i)  => {\n\t\t\t\t\tlet flexGrow = this.flex[i] === undefined ? 1 : this.flex[i]\n\t\t\t\t\tlet aItem = item.split(':')\n\t\t\t\t\tlet label = aItem.length > 1 ? aItem[1]  : aItem[0]  \n\t\t\t\t\tlet dooJustify = ''\n\t\t\t\t\tif (flexGrow.includes(':')) {\n\t\t\t\t\t\tdooJustify = flexGrow.split(':').length > 2 ? 'doo-center' : 'doo-end'\n\t\t\t\t\t\tflexGrow = flexGrow.replace(/:/g,'')\n\t\t\t\t\t}\n\t\t\t\t\tcolObj.push({label: label, fieldName: this.dynamicField(aItem[0]), flex: flexGrow, flexJustify: dooJustify })\n\t\t\t\t})\n\n\t\t\t\tlet dHtml = this.htmlParse(dNode, colObj)\n\t\t\t\tlet parentElem = dNode.parentElement\n\t\t\t\tparentElem.removeChild(dNode)\n\t\t\t\tparentElem.innerHTML = dHtml + parentElem.innerHTML\n\t\t\t})\t\t\n\t\t}\n\n\t\ttplNode.innerHTML = tplNode.innerHTML.replace(/\\$\\{(.+?)\\}/gm, replacer)\n\t\tlet dSrc = tplNode.content.querySelectorAll('[' +  _Doo_Config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].DATA_BIND + ']');\n\t\t[...dSrc].forEach( reactNode  =>  {\n\t\t\tif (!reactNode.hasAttribute('data-src')) {\n\t\t\t\tlet dataSrc = this.hasAttribute('doo-dispatch') ? 'DooX' : 'this.data' \n\t\t\t\treactNode.setAttribute('data-src' , dataSrc)\n\t\t\t}\t\n\t\t})\n\t\tlet reactiveElems = tplNode.content.querySelectorAll('[data-src]')\n\t\tlet len = reactiveElems.length\n\t\tlet i = 0\n\t\tlet reactiveElem = [], dataElem, dataSet\n\t\tfor (i=0;i<len;i++) {\n\t\t\tlet key = reactiveElems[i].getAttribute(_Doo_Config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].DATA_BIND)  \n\t\t\tlet dataSrc = reactiveElems[i].getAttribute('data-src')\n\t\t\tif (dataSrc) {\n//\t\t\t\tif (dataSrc === 'DooX') {\n\t\t\t\t\tthis.setAttribute('doo-dispatch', key)\n\t\t\t\t\tdataSet = dataSrc.trim() //DooX.getData(key)\n//\t\t\t\t} else {\n//\t\t\t\t\tdataSet = this.host[dataSrc] // await this.getDataObj(dataSrc, reactiveElems[i] )\n//\t\t\t\t\tdataSet = await this.getDataObj(dataSrc, reactiveElems[i] )\n//\t\t\t\t}\n//\t\t\t\tthis.data[key] = Array.isArray(dataSet) ? dataSet : dataSet[key]\n\t\t\t} \n\t\t\tif (dataSrc.indexOf('this.parent') === 0) {\n\t\t\t\treactiveElems[i].useParent = true\n\t\t\t}\n\n\t\t\treactiveElems[i].removeAttribute('data-src')\n\t\t\treactiveElems[i].level = _getNodeLevel(reactiveElems[i])\n\t\t\treactiveElem.push(reactiveElems[i])\n\t\t}\n\t\tthis.removeAttribute('data-map')\n\t\tthis.removeAttribute('flex')\n\t\tthis.removeAttribute('data-fetch')\n\n\t\tconst orderByLevel = (a,b) => {\n\t\t\treturn ((a.level === b.level) ? 0 : (a.level > b.level) ? 1 : -1)\n\t\t}\n\n\t\treactiveElem.sort(orderByLevel).reverse()\n\n\t\tfor (i=0;i<len;i++) {\n\t\t\tif ('|STYLE|LINK|'.indexOf(`|${reactiveElem[i].tagName}|`) > -1) {\n\t\t\t\tdataElem = reactiveElem[i]\n\t\t\t} else if (reactiveElem[i].parentElement && (reactiveElems[i].getAttribute(_Doo_Config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].DATA_BIND) === 'void' ||  '|DL|UL|TBODY|THEAD|TFOOT|TR|SELECT|SECTION|'.indexOf(`|${reactiveElem[i].parentElement.tagName}|`) >-1)) {\n\t\t\t\t//TODO remove slots or elem with doo-static attribute, and put as first child after render \n\t\t\t\tdataElem = reactiveElem[i].parentElement\n\t\t\t} else {\n\t\t\t\tdataElem = document.createElement('data')\t\n\t\t\t}\n\t\t\tdataElem.dataKey = reactiveElem[i].getAttribute(_Doo_Config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].DATA_BIND)\n\t\t\tlet parsedNode = this.dooParse(reactiveElem[i], this,  this.dataMap)\n\t\t\tdataElem.templateArray = parsedNode.templateArray\n\t\t\tdataElem.processNode = parsedNode.processNode\n\t\t\tdataElem.xHtml = parsedNode.xHtml \t\n\t\t\tdataElem.name = i\n\t\t\tdataElem.level = _getNodeLevel(reactiveElem[i])\n\t\t\tdataElem.useParent = reactiveElem[i].useParent\n\t\t\tdataElem.noRepeat = reactiveElem[i].hasAttribute('data-norepeat')\n\t\t\tif (dataElem.tagName === 'DATA' || dataElem.tagName === 'STYLE' || dataElem.tagName === 'LINK') {\n\t\t\t\t//TODO allow for templates not to require single root node \n\t\t\t\tif (reactiveElem[i].parentElement) {\n\t\t\t\t\treactiveElem[i].parentElement.replaceChild(dataElem, reactiveElem[i])\n\t\t\t\t} else {\n\t\t\t\t\t//TODO consider adding single child node on the fly\n\t\t\t\t\tconsole.log('Warning: Templates should only have one childnode')\n\t\t\t\t\treactiveElem[i].appendChild(dataElem)\t\t\t\t\t\n\t\t\t\t}\t\n\t\t\t}\n\t\t\tthis.place.push(dataElem)\n\t\t}\n\t\treturn this.place\n\t}\n\tasync setContext() {\n\t\t//TODO tie this to the Doo object and bind it more elegantly\n\t\t// if (!window[this.constructor.name]) {\n\t\t// \twindow[this.constructor.name] = []\n\t\t// }\n\t\t// window[this.constructor.name].push(this)\n\t\tif (this.childNodes.length >0) {\n\t\t\tif (this.getElementsByTagName('template') && this.getElementsByTagName('template').length > 0) {\n\t\t\t\tthis.removeChild(this.getElementsByTagName('template').item(0))\n\t\t\t}\t\n\t\t}\t\n\t\tlet context = this.getAttribute('context') || _Doo_Config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].SHADOW \n\t\tif (context === _Doo_Config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].SHADOW) {\n\t\t\tthis.componentContainer = this.shadow.host\n\t\t\tthis.showComponentContainer(false)\n\t\t\tlet currentClasses = this.templateElem.firstElementChild.hasAttribute('class') ? ' ' + this.templateElem.firstElementChild.getAttribute('class') : ''\n\t\t\tlet parentClasses = this.hasAttribute('class') ? this.getAttribute('class') + ' ' : ''\n\t\t\tif (parentClasses + currentClasses !== '' && this.templateElem.firstElementChild) {\n\t\t\t\tthis.templateElem.firstElementChild.setAttribute('class', `${parentClasses}${currentClasses}`)\n\t\t\t}\n\t\t\tthis.shadow.appendChild(this.templateElem)\n\t\t} else if (context === _Doo_Config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].DOCUMENT) {\n\t\t\tthis.componentContainer = this.parentElement\n\t\t\tthis.showComponentContainer(false)\n\t\t\tthis.componentContainer.replaceChild(this.templateElem, this)\n\t\t}\t\n\t\tthis.initialHeight = this.shadow.firstElementChild.offsetHeight\n\t}\n\n\trenderNode(place, data, start = 0, pgSize = _Doo_Config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].PAGE_SIZE,clear=true) {\n\t\t// const _getItemValue = (item, prop) => {\n\t\t// \tif (typeof prop === 'function') {\n\t\t// \t\treturn this[prop](item)\n\t\t// \t}\n\t\t// \tlet curValue = item\n\t\t// \ttry { \n\t\t// \t\tprop.split('.').forEach(key => curValue = curValue[key])\n\t\t// \t} catch(e) {\n\t\t// \t\tconsole.log('Property not found', prop, JSON.stringify(curValue))\n\t\t// \t}\n\t\t// \treturn curValue\n\t\t// }\n\t\tlet stop = start + pgSize\n\t\tif (clear) {\n\t\t\tplace.textContent = ''\n\t\t}\n\n\t\tfor (let i = 0; i<stop; ++i) {\n\t\t\tlet cacheNode = place.processNode.cloneNode(true) \n\t\t\tcacheNode.querySelectorAll('slot').forEach(item => item.parentElement.textContent = data[i][item.name])\n\t\t\tplace.appendChild(cacheNode)\n\t\t}\t\n\n\t\treturn\n\t}\t\n\t// _highlight(val, filterVal)  {\n\t// \tlet filterKey = filterVal && filterVal.toLowerCase()\n\t// \tif (!filterKey || !val) {return val}\n\t// \tlet re = new RegExp(filterKey, \"ig\")\n\t// \tlet value = val.toString().replace(/&amp;/gi,'&')\n\t// \t//TODO make <b> configurable\n\t// \treturn value.replace(re, txt => `<b class=\"doo-find\">${txt}</b>`)\n\t// }\n\n\n\tshowComponentContainer(show=true) {\n\t\tif (this.componentContainer) {\n\t\t\tthis.componentContainer.style.visibility = show ? 'visible' : 'hidden'\n\t\t}\t\n\t}\n\trenderTable(dataSet=this.data[this.defaultDataSet],target=this.place[0], start=0) {\n\t\tlet len = dataSet.length\n\t\tif (len === 0) {\n\t\t\ttarget.textContent = ''\n\t\t\tthis.showComponentContainer()\n\t\t\treturn\n\t\t}\n\t\tthis.renderNode(target, dataSet, start , len - start)\n\t\tthis.showComponentContainer()\n\t}\n\tappend(dataSet=this.data[this.defaultDataSet],target=this.place[0], start=0) {\n\t\tthis.renderNode(target, dataSet, start , dataSet.length - start, false)\n\t\tthis.showComponentContainer()\n\t}\t\n\n\tgetIndex(row) {\n\t\tlet idx =  this.data.rows.findIndex((item, i) => {\n\t\t\tif (item.id === row.key) {\n\t\t\t\treturn i\n\t\t\t}\n\t\t}) \n\t\treturn idx\n\t}\n\n\trender(dataSetName=null, page=0, replaceOrAppendRow=null)  {\n\t\tif (!this.template) {\n\t\t\tconsole.error(this.name + ' has no template defined')\n\t\t\tconsole.log('You need to set a data-template attribute on the <doo-html /> component')\n\t\t\tconsole.log('You can referense you data-template by a template id')\n\t\t\tconsole.log('Example: <doo-html data-template=\"#t1\" .../>')\n\t\t\tconsole.log('Templates can also be external and you can use reletive path to access it')\n\t\t\tconsole.log('Example: <doo-html data-template=\"./templates/t1.html\" .../>')\n\t\t\treturn\n\t\t} \n\t\tif (!this.place) {\n\t\t\t//TODO make the root the default\n\t\t\tconsole.log('No target set on the component or inside the template. USAGE: set the bind=dataKey or data-src=data-key')\n\t\t}\n\t\tfor (let i=0, len=this.place.length;i<len;i++) {\n\t\t\tif (this.place[i].tagName === 'TR' || this.place[i].tagName === 'TBODY' || this.place[i].tagName === 'TABLE') {\n\t\t\t\tthis.renderTable(dataSetName, this.place[i], page )\n\t\t\t}  \n\t\t\tif (dataSetName && dataSetName !== this.place[i].dataKey) {\n\t\t\t\tcontinue   // TODO other for-eachs that are children of the specified data set proably needs to be re-rendered (needs test scenarios)\n\t\t\t}\n\t\t\tif (page === 0 && this.place[i].tagName !== 'STYLE' && !this.place[i].classList.contains('fhead')) {\n\t\t\t\tlet pg = this.place[i].getAttribute(_Doo_Config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].DATA_BIND) === 'dummy' ? -1 : 0 \n\t\t\t\tthis.place[i].setAttribute(\"page\", pg);\n\t\t\t}\t\n\t\t\tlet dataKey = this.place[i].dataKey\n\t\t\t//this.getFilteredData(this.place[i].dataKey) ? this.getFilteredData(this.place[i].dataKey) : this.data[this.place[i].dataKey]\n\t\t\tlet pageSize = this.place[i].noRepeat ? 1 : this.PAGE_SIZE\n\t\t\tif (replaceOrAppendRow === null) {\n\t\t\t\t// if (this.place[i].useParent) {\n\t\t\t\t// \tthis.place[i].innerHTML =  this.renderNode(this.place[i], dataKey, parseInt(this.getAttribute('key')) , 1)\n\t\t\t\t// } else {\t\n\t\t\t\t\tthis.place[i].innerHTML =  this.renderNode(this.place[i], dataKey,  page * this.PAGE_SIZE, pageSize)\n\t\t\t\t// }\t\n\t\t\t} else {\n\t\t\t\tthis.place[i].append(this.renderNode(this.place[i], dataKey,  replaceOrAppendRow, 1))\n\t\t\t}\n\t\t}\t\t\n\t\tthis.showComponentContainer()\n\t\treturn page\t\n\t}\n\tasync connectedCallback() {\n\t\tlet context = this.getAttribute('context') || _Doo_Config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].SHADOW \n\t\tthis.shadow = context === _Doo_Config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].SHADOW ? this.attachShadow({mode: 'open'}) : document\n\t\tif (!this.defaultDataSet && this.getAttribute('bind')) {\n\t\t\tthis.defaultDataSet = this.getAttribute('bind')\n\t\t\t//this.scrollTarget = Config.FLEX_BODY\n\t\t}\t\n\t\tlet tag = this.constructor.name.toLowerCase()\n\n\t\tif (this.scrollTarget) {\n\t\t\tthis.scrollElem = this.shadow.querySelector(this.scrollTarget)\n\t\t} \n\n\t\tthis.template = this.getAttribute('template')\n\n\t\tthis.templateNode = await this.createDooTemplate(this.template)\n\t\tthis.templateElem = this.templateNode.content\n\t\tthis.initReactiveDataNodes(this.templateNode)\n\t\tthis.setContext()\n\t\tif (window['dooAfterRender'] && typeof window['dooAfterRender'] === 'function') {\n\t\t\twindow['dooAfterRender']()\n\t\t}\n\t\t// TODO make sure that this is safe\n\t\tthis.render([],this.place[0])\n\t\t//this.setAttribute('doo-refresh', new Date().getTime())\n\t\t// if (typeof this.dooAfterRender === 'function') {\n\t\t// \tthis.setAttribute('doo-after-render', 'dooAfterRender')\n\t\t// }\n\t\t\tif (typeof this.dooAfterRender === 'function') {\n\t\t\t\tawait this.dooAfterRender()\n\t\t\t}\n\n\t}\n\tfetchTemplate(url) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t  const xhr = new XMLHttpRequest()\n\t\t  xhr.open(\"GET\", url)\n\t\t  xhr.onload = () => resolve(xhr.responseText)\n\t\t  xhr.onerror = () => reject(xhr.statusText)\n\t\t  xhr.send();\n\t\t})\n\t}\n\t\n\tasync createDooTemplate(templateIdOrPath) { \n\t\tlet tpl = ''\n\t\tif (templateIdOrPath.indexOf('#') === 0) {\n\t\t\ttpl =  document.querySelector(templateIdOrPath).outerHTML\n\t\t} else {\n\t\t\ttpl = await fetchTemplate(url)\n\t\t}\n\t\tlet elem = document.createElement('div')\n\t\telem.innerHTML = tpl\n\t\tif (elem.querySelector('template')) {\n\t\t\t//TODO create ERROR slot or Doo.$Config constant\n\t\t\telem.innerHTML = elem.querySelector('template') ? tpl : `<template><center><pre>The template you are trying to import does not have a &lt;template&gt tag</pre><div style=\"color:red\">${this.template}</div></enter></template>`\n\t\t}\n\t\t//TODO check for null pointer\n\t\tlet importedTemplate = elem.querySelector('template').cloneNode(true)\n\t\timportedTemplate.removeAttribute('id')\n\t\n\t\tlet templateNode  = document.createElement('template')\n\t\ttemplateNode.innerHTML = importedTemplate.innerHTML\n\t\n\t\t// TODO warn when there are multiple children (maybe not needed, not sure)\n\t\tif (!templateNode.content.parentElement) {\n\t\t\tlet tplRootNode = document.createElement('section');\n\t\t\ttplRootNode.innerHTML = templateNode.innerHTML\n\t\t\ttemplateNode.innerHTML = tplRootNode.outerHTML\n\t\t}\n\t\t\n\t\t//TODO implement css=\"inherit\" and use https://developer.mozilla.org/en-US/docs/Web/API/DocumentOrShadowRoot to bring them in\n\t\t// if (!shadow && component.getAttribute('css')) {\n\t\t//     let cssList = this.getAttribute('css').split(',')\n\t\t//     let len = cssList.length \n\t\t//     for (let i=0;i<len;i++) {\n\t\t//         let link = document.createElement('link')\n\t\t//         link.href = cssList[i]\n\t\t//         link.rel = \"stylesheet\"\n\t\t//         //this.templateNode.content.firstElementChild.parentNode.insertBefore(link, this.templateNode.content.firstElementChild)\n\t\t//         templateNode.content.firstElementChild.parentNode.insertBefore(link, this.templateNode.content.firstElementChild)\n\t\t//     }\n\t\t// }\n\t\tlet templateElem = templateNode.content\n\t\n\t\tlet styleNode = templateElem.querySelectorAll('style')\n\t\t//TODO support multiple style nodes within the template\n\t\tif (styleNode && styleNode.length > 0) {\n\t\t\ttemplateElem.appendChild(styleNode[0])\n\t\t}\n\t\treturn templateNode\n\t}\n\t\n\n}\t\nif (!window.DooHTML) {\n\twindow.Doo = DooHTML\n\twindow.DooHTML = DooHTML\n}\t\n\t\t\nDooHTML.define(DooHTML,'html')\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DooHTML);\n\n\n\n//# sourceURL=webpack://doo-build/./src/Doo-HTML.js?")}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./src/Doo-HTML.js")})();