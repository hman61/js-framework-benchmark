/*! For license information please see doo.html.min.js.LICENSE.txt */
(()=>{var __webpack_modules__={49:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>a});class a{static DATA_BIND="bind";static TEMPLATE_EXT=".html";static COMPONENT_DIR="/components";static NAME="DooHTML";static TYPE={DEFAULT:0,ENUM:1,DEEP:2,COMPUTED:3};static MATCH={ANY:-1,STARTS_WITH:0,EXACT:1};static DELIMITER={BEG:"{{",END:"}}"};static DOCUMENT="document";static SHADOW="shadow";static FLEX_BODY=".fbody";static PAGE_SIZE=12}},937:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>a});const a=createDooTemplate=t=>{let e="";0===t.indexOf("#")&&(e=document.querySelector(t).outerHTML);let i=document.createElement("div");i.innerHTML=e,i.querySelector("template")&&(i.innerHTML=i.querySelector("template")?e:`<template><center><pre>The template you are trying to import does not have a &lt;template&gt tag</pre><div style="color:red">${(void 0).template}</div></enter></template>`);let a=i.querySelector("template").cloneNode(!0);a.removeAttribute("id");let r=document.createElement("template");if(r.innerHTML=a.innerHTML,!r.content.parentElement){let t=document.createElement("section");t.innerHTML=r.innerHTML,r.innerHTML=t.outerHTML}let s=r.content,o=s.querySelectorAll("style");return o&&o.length>0&&s.appendChild(o[0]),r}},982:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>a});const a={dataSet:{},setData:function(t,e,i=null){t=this.getDataSetName(t),this.dataSet[t]=e,this.refresh(t)},getData:function(t){return t=this.getDataSetName(t),this.dataSet[t]},getDataSetName:function(t){return t&&"object"==typeof t&&(t=Doo.getDataBind(t)),t?(this.dataSet[t]||(this.dataSet[t]=[]),t):(console.log("No dataSet name specified."),null)},prepend:function(t,e){t=this.getDataSetName(t),this.append(t,e,!0)},append:async function(t,e,i=null){Array.isArray(e)?this.dataSet[t]=i?e.concat(Doo.DAO.getData(t)):Doo.DAO.getData(t).concat(e):(t=this.getDataSetName(t),i?Doo.DAO.getData(t).splice(0,0,e):Doo.DAO.getData(t).push(e)),this.refresh(t)},update:function(t,e,i){t=this.getDataSetName(t),Doo.DAO.getData(t).splice(i,1,e),this.refresh(t)},remove:function(t,e){t=this.getDataSetName(t),Doo.DAO.getData(t).splice(e,1),this.refresh(t)},dispatch:async function(t,e=document){const i=e.querySelectorAll("[data-src='"+t+"']");for(let t=0,e=i.length;t<e;t++)i[t].setAttribute("doo-refresh",(new Date).getTime())},refresh:async function(t,e=document){const i=e.querySelectorAll("[doo-dispatch='"+t+"']");for(let t=0,e=i.length;t<e;t++)await i.item(t).render()},csvToJson:function(t){let e=t.split("\n"),i=[];if(void 0!==e){let t=e.length,a=e[0].replace(/\r/g,"").split(","),r=a.length;if(e.length>1){let s=new RegExp('(,)(?=(?:[^"]|"[^"]*")*$)',"g");for(let o=1;o<t-1;o++){let t={},l=(e[o].replace(s,"|^|")+"|^|").split("|^|");for(let e=0;e<r;e++)t[a[e]]=l[e]?l[e].replace(/"/g,"").trim():"";i.push(t)}}}return i}}},786:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>Doo});var _doo_dao_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(982),_doo_util_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(653);window.isReady={};class Doo extends HTMLElement{static get $Doo(){return{instance:{},counter:{},getNextID:function(t){return void 0===Doo.$Doo.counter[t]&&(Doo.$Doo.counter[t]=-1),t+"_"+ ++Doo.$Doo.counter[t]}}}static get version(){return"v0.90.1"}constructor(t=50){super(),Doo.debug=location.href.includes("#debug")||!1,Doo.DAO=_doo_dao_js__WEBPACK_IMPORTED_MODULE_0__.default,Doo.util=_doo_util_js__WEBPACK_IMPORTED_MODULE_1__.default,this.debug=Doo.debug,this.initialTime=(new Date).getTime(),this.PAGE_SIZE=t,!this.template&&this.getAttribute("template")&&(this.template=this.template||this.getAttribute("template")),this.filteredData={},this.visibleColumns=[],this.place=[],this.scrollPos=0,this.debug&&console.log(Doo.$Config.NAME+" "+Doo.version)}find(t){let e=t.target.value.trim().length?t.target.value.trim():"",i=this.data[this.defaultDataSet]&&this.data[this.defaultDataSet].length>1e3?700:e.length>3?1:500;"deleteContentBackward"===t.inputType&&(i=700),this.filterTimeoutID&&clearTimeout(this.filterTimeoutID),this.filterTimeoutID=setTimeout((()=>{this.filterKey=e,this.setDataFilter(this.defaultDataSet),this.clearChildren(),this.render(),this.container&&(this.container.scrollTop=0)}),i)}getDooParent(){if(this.shadow.host){let t=this.shadow.host;for(;t.parentNode;){if(t.parentNode.host)return t.parentNode.host;t=t.parentNode}}return null}static getDataBind(t){for(;t.parentNode;){if(t.hasAttribute(Doo.$Config.DATA_BIND))return t.getAttribute(Doo.$Config.DATA_BIND);t=t.parentNode}}static get $Config(){return Object.freeze({DATA_BIND:"bind",TEMPLATE_EXT:".html",COMPONENT_DIR:"/components",NAME:"Doo.HTML",TYPE:{DEFAULT:0,ENUM:1,DEEP:2,COMPUTED:3},MATCH:{ANY:-1,STARTS_WITH:0,EXACT:1},DELIMITER:{BEG:"{{",END:"}}"},DOCUMENT:"document",SHADOW:"shadow",FLEX_BODY:".fbody"})}static get $Computed(){return{randomImg:()=>"https://source.unsplash.com/random/720x400",childDoodad:t=>t.instance.injectChild(t.name,t.props),currentItem:t=>t.item.address,$0:t=>t.item[t.props[0]],$1:t=>t.item[t.props[1]],$2:t=>t.item[t.props[2]],greyShade:t=>["light-grey","grey","dark-grey","black"][t.i%4],randomTailwindShade:t=>100*Math.random(t.i%8+1),fraction:t=>["","whole","half","third","quarter","fifth"][t.arr.length],toUpperCase:t=>t.getValue().toUpperCase(),toLowerCase:t=>t.getValue().toLowerCase(),substring:t=>t.getValue().substring(t.$1,t.$2),length:t=>t.arr.length,found:t=>t.instance.getCurrentData(t.$1).length,count:t=>t.instance.data[t.$1].length,recCountByDataSetKey:t=>t.klass[t.dataSetKey].length,i:t=>t.i,row:t=>t.i+1,$id:t=>"_$"+t.i,n:t=>t.i+1,ts:()=>(new Date).getTime(),pluralize:t=>t.arr.length>1?"s":"",nbsp:()=>"&nbsp;",zeroOne:t=>t.i%2,lorem:t=>{let e="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.";if(!isNaN(t.$1)){let i=Math.min(t.$1,6);for(let t=1;t<i;t++)e+=" Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."}return e},content:t=>t.$1,html:t=>t.$1,dooReflect:t=>{let e=Doo.$Doo.instance[t.instance.getAttribute("id")].dataMap[t.i].split(":");return e.length>1?e[1]:e[0]},dooFlex:t=>{let e=Doo.$Doo.instance[t.instance.getAttribute("id")].flex;e=e[t.i];let i="";return e.includes(":")&&(i=e.split(":").length>2?"doo-center":"doo-end",e=e.replace(/:/g,"")),"doo-flex doo-"+e+" "+i},dooSort:t=>{let e=Doo.$Doo.instance[t.instance.getAttribute("id")].dataMap[t.i].split(":"),i=e[0].includes("(")?t.instance.getAttribute("id")+"."+e[0]:"'"+e[0]+"'",a=t.instance.getAttribute("id").split("_");return`${a[0]}[${a[1]}].sortBy(this,${i})`},dynamic:t=>Doo.$Config.DELIMITER.BEG+t.item+Doo.$Config.DELIMITER.END}}highlight(t){let e=this.filterKey&&this.filterKey.toLowerCase();if(!e||!t)return t;let i=new RegExp(e,"ig");return t.toString().replace(/&amp;/gi,"&").replace(i,(t=>`<b class="doo-find">${t}</b>`))}static get observedAttributes(){return["doo-refresh","key","doo-foreach","orientation","doo-dao","doo-db-update","doo-db","page-size","debug"]}static xAttr(){return["src","selected","checked","disabled","readonly"]}dynamicField(t){return Doo.$Config.DELIMITER.BEG+t+Doo.$Config.DELIMITER.END}async attributeChangedCallback(t,e,i){i.length>0&&e!==i&&("doo-db-update"===t||"doo-refresh"===t?await this.render():"page-size"===t?this.PAGE_SIZE=i:"debug"===t&&(Doo.debug=!0))}static async insertRow(t,e){document.createElement("div").innerHTML=`<doo-html template="/doodads/row/row.${Doo.$Config.TEMPLATE_EXT}" data-fetch="${e}" bind="${t}"></doo-html>`}static async insertComponent(t,e,i="."){let a=(t=t.trim()).toLowerCase(),r=document.createElement("div");r.innerHTML=`<doo-${t} template="${i}/templates/${a}${Doo.$Config.TEMPLATE_EXT}?${Doo.$Computed.ts()}"></doo-${t}>`,document.querySelector(`${e}`).innerHTML=r.innerHTML}async connectedCallback(){let t=this.getAttribute("context")||Doo.$Config.SHADOW;if(this.shadow=t===Doo.$Config.SHADOW?this.attachShadow({mode:"open"}):document,this.id||this.getDooParent()||(this.id=Doo.$Doo.getNextID(this.constructor.name)),!this.defaultDataSet&&this.getAttribute("bind")&&(this.defaultDataSet=this.getAttribute("bind")),Doo.$Doo.instance[this.id]||(Doo.$Doo.instance[this.id]=this),"function"==typeof this.init&&await this.init(),this.debug){let t=this.constructor.name.toLowerCase();console.log(`Custom tag added: <doo-${t} />`)}await this.render(),this.scrollTarget&&(this.scrollElem=this.shadow.querySelector(this.scrollTarget)),this.ready=!0,"function"==typeof this.dooAfterRender&&await this.dooAfterRender()}static define(t,e=null){let i=e||t.name.toLowerCase();customElements.define("doo-"+i,t)}getFilteredData(t){return this.filteredData[t]}async setTemplate(t,e){let i=0===t.indexOf("<template")?t:"";return i=this.firstElementChild&&this.firstElementChild.getElementsByTagName("template").length>0?this.firstElementChild.getElementsByTagName("template")[0].outerHTML:await this.getTemplateURI(t,e),i}async getTemplateURI(t){let e;return e=0===t.indexOf("#")?await document.querySelector(t).outerHTML:await Doo.fetchURL(t),e}dooParse(t){let e=t.cloneNode(!0);e.removeAttribute(Doo.$Config.DATA_BIND);let i=e.outerHTML.replace(/\t/g,"").replace(/\n/g,""),a=i;Doo.xAttr().forEach((t=>{i=i.replace(new RegExp(" "+t+'="{{(.+)}}"',"g")," doo-"+t+'="{{$1}}"')}));let r=a===i;void 0===window[this.constructor.name]&&(window[this.constructor.name]=[]);let s=window[this.constructor.name].length;i=i.split('="doo.self.').join('="'+this.constructor.name+"["+s+"]."),i=i.split('="self.').join('="'+this.constructor.name+"["+s+"].");let o,l=i.split(Doo.$Config.DELIMITER.END),n=[],h=l.length;for(let t=0;t<h;t++)Doo.$Config.DELIMITER.BEG.includes(Doo.$Config.DELIMITER.BEG)&&(o=l[t].split(Doo.$Config.DELIMITER.BEG),n.push(o[0]),n.push(this.getPropertyType(o[1])));return{templateArray:n,xHtml:r}}htmlParse(t,e){let i=t.cloneNode(!0);i.removeAttribute(Doo.$Config.DATA_BIND),i.removeAttribute("data-src");let a=i.outerHTML.replace(/\t/g,"").replace(/\n/g,""),r=0,s=e.length;const o=(t,i)=>e[r][i.trim()];let l=[];for(r=0;r<s;r++)l.push(a.replace(/\{\{(.+?)\}\}/gm,o));return l.join("")}getPropertyType(t){if(!t)return new Doo.FieldType("",void 0,this.constructor,this);t=t.trim();let e=Doo.$Config.TYPE.DEFAULT;t.indexOf("(")>-1?e=Doo.$Config.TYPE.COMPUTED:t.indexOf(".")>0?e=Doo.$Config.TYPE.DEEP:isNaN(t)||(e=Doo.$Config.TYPE.ENUM);let i=new Doo.FieldType(t,e,this.constructor,this);return this.visibleColumns.push(t),i.parentElem=this.parentElement,i}setItemValue(t,e,i){let a=e.split(".");for(var r=0;r<a.length-1;r++)t=t[a[r]]={};t[a[a.length-1]]=i}getItemValue(t,e){if("function"==typeof e)return this.highlight(this[e](t));let i=t;try{e.split(".").forEach((t=>i=i[t]))}catch(t){console.log("Property not found",e,JSON.stringify(i))}return this.highlight(i)}renderNode(t,e,i=0,a=this.PAGE_SIZE){let r=e.length,s=i+a,o=[];s>r&&(s=r);for(let a=i;a<s;a++)for(let i=0,r=t.templateArray.length;i<r;i+=2)o.push(t.templateArray[i]),o.push(this.getItemValue(e[a],t.templateArray[i+1].fld));return o.join("")}getLevel(t){let e=0;for(;t.parentElement;)t=t.parentElement,e++;return e}clearDataFilter(t){this.filteredData[t]=void 0}setDataFilter(t,e){let i=this.filterKey&&this.filterKey.toLowerCase(),a=this.data[t].slice(),r=this;e?a=a.filter(e):i&&(i=String(i),a=a.filter((t=>r.visibleColumns.some((e=>String(r.getItemValue(t,e)).toLowerCase().indexOf(i)>-1))))),this.setScrollContainerHeight(a.length),this.filteredData[t]=a.slice(0,this.page_size)}async getDataObj(dataSrc,dataSheetKey=null){let data,key;if(dataSrc=dataSrc.trim(),dataSrc.indexOf(".csv")>-1)return data=await Doo.fetchURL(dataSrc),Doo.DAO.csvToJson(data);if(dataSheetKey&&dataSrc.indexOf("worksheet")>-1){let t=dataSrc.split("|");return data=await this.tableTop(dataSheetKey,t[1]),data}if(dataSrc.indexOf("worksheet")>-1&&dataSrc.indexOf("key")>-1){let t=dataSrc.split("|"),e=t[1],i=t[3];return data=await this.tableTop(e,i),data}if(0===dataSrc.indexOf("http")||dataSrc.indexOf(".json")>0)return data=await Doo.fetchURL(dataSrc),JSON.parse(data);if(dataSrc.indexOf(".js")>0)return data=await __webpack_require__(113)(`${dataSrc}`),data.default;if(0===dataSrc.indexOf("{"))return JSON.parse(dataSrc);if(0===dataSrc.indexOf("..")||"this.parent.data"===dataSrc){let t=this.getDooParent();return t.data}if(dataSrc.indexOf("..")>0){let t=dataSrc.replace("[","").replace("]",""),e=t.split(".."),i=[],a=isNaN(e[0]),r=parseInt(a?e[0].charCodeAt(0):e[0]),s=parseInt(a?e[1].charCodeAt(0):e[1]);for(let t=r;t<=s;t++)i.push(a?String.fromCharCode(t):t);return i.splice(0)}if(dataSrc.includes("|")||0===dataSrc.indexOf("[")){let t=dataSrc.includes("|")?"|":",",e=dataSrc.replace("[","").replace("]","").split(t);return e.forEach((t=>t.trim())),e}return 0===dataSrc.indexOf("window.")||0===dataSrc.indexOf("const.")||0===dataSrc.indexOf("var.")?(key=dataSrc.split(".")[1].trim(),window[key]):dataSrc.includes(" ")||void 0===typeof eval(dataSrc)?(console.log("WARNING: "+dataSrc+" datasource not scooped properly"),dataSrc):eval(dataSrc)}async initDataNodes(t){this.dataMap=null,this.flex=null,this.hasAttribute("data-map")&&(0===this.getAttribute("data-map").indexOf("Doo.reflect")?this.dataMap=Reflect.ownKeys(Doo.DAO.getData(this.getAttribute(Doo.$Config.DATA_BIND))[0]):this.dataMap=this.getAttribute("data-map").split("|")),this.hasAttribute("flex")&&(this.flex=this.getAttribute("flex").replace("[","").replace("]","").split("|"));let e=t.content.querySelectorAll('[data-src="${data-map}"]');e.length>0&&[...e].forEach((t=>{let e=[];this.dataMap.forEach(((t,i)=>{let a=void 0===this.flex[i]?1:this.flex[i],r=t.split(":"),s=r.length>1?r[1]:r[0],o="";a.includes(":")&&(o=a.split(":").length>2?"doo-center":"doo-end",a=a.replace(/:/g,"")),e.push({label:s,fieldName:this.dynamicField(r[0]),flex:a,flexJustify:o})}));let i=this.htmlParse(t,e),a=t.parentElement;a.removeChild(t),a.innerHTML=i+a.innerHTML})),t.innerHTML=t.innerHTML.replace(/\$\{(.+?)\}/gm,((e,i)=>isNaN(i)?this.hasAttribute(i)?this.getAttribute(i):t.hasAttribute(i)?t.getAttribute(i):"":this.dataMap.length>0?Doo.$Config.DELIMITER.BEG+this.dataMap[i-1]+Doo.$Config.DELIMITER.END:void 0)),[...t.content.querySelectorAll("["+Doo.$Config.DATA_BIND+"]")].forEach((t=>{if(!t.hasAttribute("data-src")){let e=this.hasAttribute("doo-dispatch")?"Doo.DAO":"this.data";t.setAttribute("data-src",e)}}));let i,a,r=t.content.querySelectorAll("[data-src]"),s=r.length,o=0,l=[];for(o=0;o<s;o++){let t=r[o].getAttribute(Doo.$Config.DATA_BIND).trim(),e=r[o].getAttribute("data-src").trim();e&&("Doo.DAO"===e?(this.setAttribute("doo-dispatch",t),a=Doo.DAO.getData(t)):a=await this.getDataObj(e,r[o]),this.data[t]=Array.isArray(a)?a:a[t]),0===e.indexOf("this.parent")&&(r[o].useParent=!0),r[o].removeAttribute("data-src"),r[o].level=this.getLevel(r[o]),l.push(r[o])}for(this.removeAttribute("data-map"),this.removeAttribute("flex"),this.removeAttribute("data-fetch"),l.sort(((t,e)=>t.level===e.level?0:t.level>e.level?1:-1)).reverse(),o=0;o<s;o++){i="|STYLE|LINK|".indexOf(`|${l[o].tagName}|`)>-1?l[o]:l[o].parentElement&&("void"===r[o].getAttribute(Doo.$Config.DATA_BIND)||"|DL|UL|TBODY|THEAD|TFOOT|TR|SELECT|SECTION|".indexOf(`|${l[o].parentElement.tagName}|`)>-1)?l[o].parentElement:document.createElement("data"),i.dataKey=l[o].getAttribute(Doo.$Config.DATA_BIND);let t=this.dooParse(l[o],this.dataMap);i.templateArray=t.templateArray,i.xHtml=t.xHtml,i.name=o,i.level=this.getLevel(l[o]),i.useParent=l[o].useParent,i.noRepeat=l[o].hasAttribute("data-norepeat"),"DATA"!==i.tagName&&"STYLE"!==i.tagName&&"LINK"!==i.tagName||(l[o].parentElement?l[o].parentElement.replaceChild(i,l[o]):(console.log("Warning: Templates should only have one childnode"),l[o].appendChild(i))),this.place.push(i)}return console.log(this.place),this.place}async prepareTemplate(){this.debug&&console.log("Template:",this.template);let t=await this.setTemplate(this.template),e=document.createElement("div");e.innerHTML=t,e.querySelector("template")&&(e.innerHTML=e.querySelector("template")?t:`<template><center><pre>The template you are trying to import does not have a &lt;template&gt tag</pre><div style="color:red">${this.template}</div></enter></template>`);let i=e.querySelector("template").cloneNode(!0);i.removeAttribute("id"),this.templateNode=document.createElement("template");let a=this.getAttribute("data-dispatch")||"undefined";this.templateNode.innerHTML=i.innerHTML.replace(/\${dataDispatch\}/g,a),this.templateElem=this.templateNode.content;let r=this.templateElem.querySelectorAll("style");r&&r.length>0&&this.templateElem.appendChild(r[0]),0===this.place.length&&(await this.initDataNodes(this.templateNode),this.getAttribute("style")&&this.templateNode.setAttribute("style",this.getAttribute("style")))}async setContext(){window[this.constructor.name]||(window[this.constructor.name]=[]),window[this.constructor.name].push(this),this.childNodes.length>0&&this.getElementsByTagName("template")&&this.getElementsByTagName("template").length>0&&this.removeChild(this.getElementsByTagName("template").item(0));let t=this.getAttribute("context")||Doo.$Config.SHADOW;if(t===Doo.$Config.SHADOW){this.shadow.host.style.visibility="hidden";let t=this.templateElem.firstElementChild.hasAttribute("class")?" "+this.templateElem.firstElementChild.getAttribute("class"):"",e=this.hasAttribute("class")?this.getAttribute("class")+" ":"";e+t!==""&&this.templateElem.firstElementChild&&this.templateElem.firstElementChild.setAttribute("class",`${e}${t}`),this.shadow.appendChild(this.templateElem),this.componentContainer=this.shadow.host}else if(t===Doo.$Config.DOCUMENT){this.style.visibility="hidden";let t=this.parentElement.replaceChild(this.templateElem,this);this.componentContainer=t}this.initialHeight=this.shadow.firstElementChild.offsetHeight,this.shadow.firstElementChild.setAttribute("data-offset",this.initialHeight);const e=new Promise((t=>{let e=(navigator.userAgent.toUpperCase().includes("FIREFOX"),25),i=0,a=setInterval((()=>{i++,this.shadow.firstElementChild.setAttribute("data-offset",this.shadow.firstElementChild.offsetHeight);let e=parseInt(this.shadow.firstElementChild.getAttribute("data-offset"));(i>20||e!==this.initialHeight)&&(this.shadow.firstElementChild.removeAttribute("data-offset"),this.scrollTarget&&this.setScrollHeight(),clearInterval(a),t())}),e)}));await e,this.componentContainer.style.visibility="visible",this.ready=!0}async setScrollHeight(){this.scrollTarget&&(this.scrollElem=this.shadow.querySelector(this.scrollTarget),this.data[this.defaultDataSet]&&this.data[this.defaultDataSet].length>this.PAGE_SIZE&&this.addScrollWatcher())}getCurrentData(t){return this.getFilteredData(t)?this.getFilteredData(t):this.data[t]}getItemValueByType(t,e,i){switch(i.type){case Doo.$Config.TYPE.DEFAULT:case Doo.$Config.TYPE.DEEP:return this.getItemValue(t[e],i.fld);case Doo.$Config.TYPE.COMPUTED:let a=new Doo.DataItem(t[e],e,t);return a.fld=i.fld,a.func=i.func,a.$1=i.$1,a.$2=i.$2,a.$3=i.$3,a.$4=i.$4,a.$5=i.$5,a.instance=i.instance,i.func(a);case void 0:return""}}renderTable(t=this.data[this.defaultDataSet],e=this.place[0],i=0){let a=document.createElement("template"),r=t.length,s=r-1;a.innerHTML=this.renderNode(e,t,i,r-i);do{e.insertBefore(a.content.removeChild(a.content.lastElementChild),e.firstElementChild).key=t[s].id}while(--s>=0)}append(t=this.data[this.defaultDataSet],e=this.place[0],i=0){let a=document.createElement("template"),r=t.length;a.innerHTML=this.renderNode(e,t,i,r-i);for(let s=i;s<r;s++)e.appendChild(a.content.removeChild(a.content.firstElementChild)).key=t[s].id}async render(t=null,e=0,i=null){if(!this.template)return void console.log(this.name+" has no template defined");this.templateNode||this.ready||await this.prepareTemplate();let a=this.debug?(new Date).getTime():null;for(let a=0,r=this.place.length;a<r;a++){if(t&&t!==this.place[a].dataKey)continue;if(0===e&&"STYLE"!==this.place[a].tagName&&!this.place[a].classList.contains("fhead")){let t="dummy"===this.place[a].getAttribute(Doo.$Config.DATA_BIND)?-1:0;this.place[a].setAttribute("page",t)}let r=this.getCurrentData(this.place[a].dataKey);this.getFilteredData(this.place[a].dataKey)?this.getFilteredData(this.place[a].dataKey):this.data[this.place[a].dataKey];let s=this.place[a].noRepeat?1:this.PAGE_SIZE;if(null===i)if(e>0&&t===this.defaultDataSet){let t=this.scrollElem.querySelector('data[page="'+e+'"]');if(t)0===t.innerHTML.length&&(t.innerHTML=this.renderNode(this.place[a],r,e*this.PAGE_SIZE,s)),this.lastInsertedElem=t;else{let t="TABLE"===this.scrollElem.tagName?"tbody":"data",i=document.createElement(t);i.setAttribute("page",e),i.innerHTML=this.renderNode(this.place[a],r,e*this.PAGE_SIZE,s),!this.lastInsertedElem||e>this.lastPage?this.place[a].parentElement.appendChild(i):this.lastInsertedElem.insertAdjacentElement("beforebegin",i),this.lastInsertedElem=i}this.scrollTarget&&"TABLE"!==this.scrollElem.tagName&&(this.lastInsertedElem.style.top=e*this.blockHeight+"px",this.lastInsertedElem.style.position="absolute")}else this.place[a].useParent?this.place[a].innerHTML=this.renderNode(this.place[a],r,parseInt(this.getAttribute("key")),1):this.place[a].innerHTML=this.renderNode(this.place[a],r,e*this.PAGE_SIZE,s);else this.place[a].append(this.renderNode(this.place[a],r,i,1));t===this.defaultDataSet&&(this.lastPage=e)}if(this.ready||this.setContext(),this.debug){this.getAttribute("title")||this.setAttribute("title",this.id+":init() "+((new Date).getTime()-this.initialTime)+"ms");let t=(new Date).getTime()-a+"ms";this.setAttribute("doo-render-time",t),this.setAttribute("title",this.getAttribute("title")+"|"+t)}return e}static async fetchURL(t){return new Promise(((e,i)=>{const a=new XMLHttpRequest;a.open("GET",t),a.onload=()=>e(a.responseText),a.onerror=()=>i(a.statusText),a.send()}))}setHttpRequest(t,e){let i=this,a=new XMLHttpRequest;a.onload=()=>{e(this.responseText,i)},a.open("GET",t,!0),a.send()}hasScroll(t){return"auto"===this.getStyle(t,"overflow-y")||"scroll"===this.getStyle(t,"overflow-y")}getStyle(t,e,i=null){if(t)return t&&t.currentStyle?t.currentStyle[e]:window.getComputedStyle(t,i).getPropertyValue(e)}async sortBy(t,e){let i=this.defaultDataSet||this.getAttribute(Doo.$Config.DATA_BIND);this.lastPage=null;let a,r=t.getAttribute("sort-dir")||1;if(Doo.util.sortBy(this.getCurrentData(i),e,r),[...t.parentElement.querySelectorAll(".doo-sort")].forEach((t=>{t.classList.remove("dir_1","dir_-1")})),t.classList.add(-1*parseInt(r)==1?"dir_-1":"dir_1"),t.setAttribute("sort-dir",-1*r),this.scrollElem&&(a=this.scrollElem.querySelectorAll("[page]"),a&&(a[0].innerHTML="")),this.lastInsertedElem=null,this.rendering=!0,await this.render(i,0),this.rendering=!1,this.container&&(this.container.scrollTop=0),a&&a.length>0)for(let t=a.length-1;t>0;t--)a[t].remove()}clearChildren(t,e="[page]"){if(this.scrollElem){let i=this.scrollElem.querySelectorAll(e);for(let e=i.length-1;e>0;e--)t&&t.find((t=>t===parseInt(i[e].getAttribute("page"))))||i[e].remove()}}async setScrollContainerHeight(t){let e=t||this.data[this.defaultDataSet].length;this.scrollElem.style.height=this.rowHeight*e+"px"}async windowWatcher(){document.body.setAttribute("doo-height",window.offsetHeight)}async addScrollWatcher(){if(this.scrollTarget&&(this.scrollElem=this.shadow.firstElementChild.querySelector(this.scrollTarget),this.scrollElem&&this.data[this.defaultDataSet].length>this.PAGE_SIZE)){this.scrollElem.style.position="relative",this.container=this.scrollElem.parentElement,this.rowHeight=this.scrollElem.offsetHeight/this.PAGE_SIZE,this.headerHeight=this.scrollElem.firstElementChild.offsetHeight,this.setScrollContainerHeight(),this.blockHeight=this.PAGE_SIZE*this.rowHeight;let t=!1;for(;this.blockHeight<this.container.offsetHeight;)this.PAGE_SIZE=2*this.PAGE_SIZE,this.blockHeight=this.PAGE_SIZE*this.rowHeight,t=!0;t&&await this.render(this.defaultDataSet,this.lastPage||0),this.lastScrollPos=0,this.componentContainer.setAttribute("data-container-height",this.componentContainer.offsetHeight),this.container.addEventListener("scroll",this.scrollWatcher.bind(this))}}async scrollWatcher(){if(!this.rendering){this.rendering=!0;let t=parseInt(this.container.scrollTop/this.blockHeight),e=parseInt((t*this.blockHeight+this.blockHeight)/this.blockHeight),i=this.container.scrollTop>this.lastScrollPos?1:0,a=this.scrollElem.querySelector('data[page="'+t+'"]'),r=this.scrollElem.querySelector('data[page="'+e+'"]');!a||e>t?(r||this.render(this.defaultDataSet,e),this.currentPage=this.render(this.defaultDataSet,t)):t!=this.currentPage&&(this.currentPage=this.render(this.defaultDataSet,t));let s=1===i?[t-1,t,e]:[t,t+1];this.clearChildren(s),this.lastScrollPos=this.container.scrollTop,this.rendering=!1}}}Doo.FieldType=class{constructor(t,e,i,a){this._fld=t,this.type=e,this.klass=i,this.instance=a,this._func=void 0,this._parentElem=void 0,this.$1=void 0,this.$2=void 0,this.$3=void 0,this.$4=void 0,this.$5=void 0,this.type===Doo.$Config.TYPE.COMPUTED&&this.createComputed()}set fld(t){this._fld=t}set parentElem(t){this._parentElem=t}set func(t){this._func=t}get fld(){return this._fld}get func(){return this._func}createComputed(){let t=this.fld.split("("),e=t[0].split(".").reverse(),i=e[0];Reflect.ownKeys(this.klass).filter((t=>t===i)).length>0?(this.func=this.klass[i],Doo.$Computed[i]&&console.log("WARNING: ","Overwriting a Doo base Doo.$Computed method is not recommended")):Doo.$Computed[i]&&(this.func=Doo.$Computed[i]),this.fld=e.length>1?e[1]:void 0,"function"!=typeof this.func&&console.log("static "+i+"() is not defined in Doo nor has it been defined as a static function in this component");let a=t[1].replace(")","");if(a&&a.length>0){a=a.split(",");for(let t=0,e=a.length;t<e;t++)this["$"+(t+1)]=a[t].replace(/'/g,"").replace(/"/g,"")}}},Doo.DataItem=class{constructor(t,e,i){this.item=t,this.i=e,this.arr=i,this._dataSetKey="",this._fld="",this._args=[],this._searchable=!0}set dataSetKey(t){this._dataSetKey=t}set fld(t){this._fld=t}set args(t){this._args=t}set filterKey(t){this._filterKey=t}set searchAble(t){this._searchAble=new Boolean(t)}get fld(){return this._fld}get length(){return this.arr.length}get filterKey(){return this._filterKey}isSearchable(){return this.searchable}getValue(){return this.item[this.fld]}toString(){return JSON.stringify(this.item)}},Doo.Criteria=class{constuctor(t){this.name=t}},Doo.EMPTY_ROW=function(t,e){return new Doo.DataItem(t[0],e,[""])},window.Doo||(window.Doo=Doo)},653:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>a});const a={getStyle:(t,e,i=null)=>t.currentStyle?t.currentStyle[e]:window.getComputedStyle(t,i).getPropertyValue(e),sortBy:(t,e,i)=>{if(t.length<1)return;const a={getValue:(t,e)=>{for(var i=e.split("."),a=t,r=0;r<i.length;r++)a=a[i[r]];return a},getDataType:function(t,e){if("object"==typeof t)return"byFunc";var i=a.getValue(e[0],t);if(i&&i.toString().indexOf("/")>0&&new Date(i)&&!isNaN(new Date(i).getTime()))return"byDate";for(var r=0;r<e.length;r++)if(isNaN(a.getValue(e[r],t)))return"byString";return"byNumber"},byFunc:function(t,e,r,s){var o=r[s].cmd,l=o.call(this,-1===r[s].dir?e:t,r[s].param,i),n=o.call(this,-1===r[s].dir?t:e,r[s].param,i);return l<n?-1:l>n?1:void 0!==r[s+1]?a[r[s+1].type](t,e,r,s+1):t.$_id-e.$_id},byDate:function(t,e,i,r){var s=i[r].fld.replace(Doo.$Config.DELIMITER.BEG,"").replace(Doo.$Config.DELIMITER.END,""),o=a.getValue(-1===i[r].dir?e:t,s),l=a.getValue(-1===i[r].dir?t:e,s);return o.getTime||l.getTime||(o=new Date(o),l=new Date(l)),(o=o.getTime())<(l=l.getTime())?-1:o>l?1:void 0!==i[r+1]?a[i[r+1].type](t,e,i,r+1):t.$_id-e.$_id},byString:function(t,e,i,r){var s=i[r].fld.replace(Doo.$Config.DELIMITER.BEG,"").replace(Doo.$Config.DELIMITER.END,""),o=a.getValue(-1===i[r].dir?e:t,s).toUpperCase(),l=a.getValue(-1===i[r].dir?t:e,s).toUpperCase();return o<l?-1:o>l?1:void 0!==i[r+1]?a[i[r+1].type](t,e,i,r+1):t.$_id-e.$_id},byNumber:function(t,e,i,r){var s=i[r].fld.replace(Doo.$Config.DELIMITER.BEG,"").replace(Doo.$Config.DELIMITER.END,""),o=Number(a.getValue(-1===i[r].dir?e:t,s)),l=Number(a.getValue(-1===i[r].dir?t:e,s));return o<l?-1:o>l?1:void 0!==i[r+1]?a[i[r+1].type](t,e,i,r+1):t.$_id-e.$_id}};var r=[];if("string"==typeof e&&(e=[e=e.replace("{{","").replace("}}",""),i||1]),e)for(var s=0;s<e.length;s+=2)r.push({fld:e[s],dir:Number(e[s+1]||1),type:a.getDataType(e[s],t)});if(t.length>0&&void 0===typeof t[0].$_id){Timer.start("makeids");for(let e=0,i=t.length;e<i;e++)t[e].$_id=Number(e);Timer.stop("makeids",!0)}t.sort((function(t,e){return a[r[0].type](t,e,r,0)}))},curTop:(t,e)=>{let i=0;if(t.offsetParent)for(;t&&(i+=t.offsetTop,!e||"absolute"!==(void 0).getStyle(t,"position"));)t=t.offsetParent;else t.y&&(i+=t.y);return i}}},113:(t,e,i)=>{var a={"./Doo-Config":[49],"./Doo-Config.js":[49],"./Doo-FieldType":[902,902],"./Doo-FieldType.js":[902,902],"./Doo-HTML":[224,224],"./Doo-HTML.js":[224,224],"./Doo-Template":[937],"./Doo-Template.js":[937],"./Doo-Util":[248,856,248],"./Doo-Util.js":[248,856,248],"./doo.dao":[982],"./doo.dao.js":[982],"./doo.html":[786],"./doo.html.js":[786],"./doo.util":[653],"./doo.util.js":[653]};function r(t){if(!i.o(a,t))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=a[t],r=e[0];return Promise.all(e.slice(1).map(i.e)).then((()=>i(r)))}r.keys=()=>Object.keys(a),r.id=113,t.exports=r}},__webpack_module_cache__={},inProgress,dataWebpackPrefix;function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var i=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(i.exports,i,i.exports,__webpack_require__),i.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var i in e)__webpack_require__.o(e,i)&&!__webpack_require__.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},__webpack_require__.f={},__webpack_require__.e=t=>Promise.all(Object.keys(__webpack_require__.f).reduce(((e,i)=>(__webpack_require__.f[i](t,e),e)),[])),__webpack_require__.u=t=>"../../js-framework-benchmark-2/frameworks/keyed/doohtml/js/"+t+".doo.html.min.js",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),inProgress={},dataWebpackPrefix="doo-build:",__webpack_require__.l=(t,e,i,a)=>{if(inProgress[t])inProgress[t].push(e);else{var r,s;if(void 0!==i)for(var o=document.getElementsByTagName("script"),l=0;l<o.length;l++){var n=o[l];if(n.getAttribute("src")==t||n.getAttribute("data-webpack")==dataWebpackPrefix+i){r=n;break}}r||(s=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,__webpack_require__.nc&&r.setAttribute("nonce",__webpack_require__.nc),r.setAttribute("data-webpack",dataWebpackPrefix+i),r.src=t),inProgress[t]=[e];var h=(e,i)=>{r.onerror=r.onload=null,clearTimeout(d);var a=inProgress[t];if(delete inProgress[t],r.parentNode&&r.parentNode.removeChild(r),a&&a.forEach((t=>t(i))),e)return e(i)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=h.bind(null,r.onerror),r.onload=h.bind(null,r.onload),s&&document.head.appendChild(r)}},__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;__webpack_require__.g.importScripts&&(t=__webpack_require__.g.location+"");var e=__webpack_require__.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=t+"../../../../../doo-build/dist/"})(),(()=>{var t={179:0};__webpack_require__.f.j=(e,i)=>{var a=__webpack_require__.o(t,e)?t[e]:void 0;if(0!==a)if(a)i.push(a[2]);else{var r=new Promise(((i,r)=>a=t[e]=[i,r]));i.push(a[2]=r);var s=__webpack_require__.p+__webpack_require__.u(e),o=new Error;__webpack_require__.l(s,(i=>{if(__webpack_require__.o(t,e)&&(0!==(a=t[e])&&(t[e]=void 0),a)){var r=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;o.message="Loading chunk "+e+" failed.\n("+r+": "+s+")",o.name="ChunkLoadError",o.type=r,o.request=s,a[1](o)}}),"chunk-"+e,e)}};var e=(e,i)=>{var a,r,[s,o,l]=i,n=0;if(s.some((e=>0!==t[e]))){for(a in o)__webpack_require__.o(o,a)&&(__webpack_require__.m[a]=o[a]);l&&l(__webpack_require__)}for(e&&e(i);n<s.length;n++)r=s[n],__webpack_require__.o(t,r)&&t[r]&&t[r][0](),t[r]=0},i=self.webpackChunkdoo_build=self.webpackChunkdoo_build||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var __webpack_exports__={};(()=>{"use strict";var t=__webpack_require__(49),e=__webpack_require__(786),i=__webpack_require__(982);__webpack_require__(937);class a{constructor(e,i){this._fld=e,this.type=i,this._func=void 0,this._parentElem=void 0,this.$1=void 0,this.$2=void 0,this.$3=void 0,this.$4=void 0,this.$5=void 0,this.type===t.default.TYPE.COMPUTED&&this.createComputed()}set fld(t){this._fld=t}set parentElem(t){this._parentElem=t}set func(t){this._func=t}get fld(){return this._fld}get func(){return this._func}createComputed(){let t=this.fld.split("("),e=t[0].split(".").reverse(),i=e[0];this.fld=e.length>1?e[1]:void 0,"function"!=typeof this.func&&console.log("static "+i+"() is not defined in Doo nor has it been defined as a static function in this component");let a=t[1].replace(")","");if(a&&a.length>0){a=a.split(",");for(let t=0,e=a.length;t<e;t++)this["$"+(t+1)]=a[t].replace(/'/g,"").replace(/"/g,"")}}}class r extends HTMLElement{static DAO=r.DAO;constructor(e=t.default.PAGE_SIZE){super(),this.PAGE_SIZE=e,this.data={},this.place=[],this.template=void 0,this.visibleColumns=[]}static get observedAttributes(){return["doo-refresh","data-src","bind","template","page-size"]}async attributeChangedCallback(t,i,a){a.length>0&&i!==a&&("data-doo-refresh"===t&&this.dataset.useState?await this.render(this.dataset.useState):"data-use-state"===t||("doo-db-update"===t||"doo-refresh"===t?await this.render():"data-store"===t||"doo-db-update"===t||"doo-refresh"===t||("page-size"===t?this.PAGE_SIZE=a:"doo-after-render"===t?"function"==typeof a&&a.call(this):"debug"===t&&(e.default.debug=!0))))}dooParse(e,i){const r=(e,i)=>{if(!e)return new a("",void 0,i.constructor,i);e=e.trim();let r=t.default.TYPE.DEFAULT;e.indexOf("(")>-1?r=t.default.TYPE.COMPUTED:e.indexOf(".")>0?r=t.default.TYPE.DEEP:isNaN(e)||(r=t.default.TYPE.ENUM);let s=new a(e,r,i.constructor,i);return i.visibleColumns.push(e),s.parentElem=i.parentElement,s};let s=e.cloneNode(!0);s.removeAttribute(t.default.DATA_BIND);let o=s.outerHTML.replace(/\t/g,"").replace(/\n/g,""),l=o;["src","selected","checked","disabled","readonly"].forEach((t=>{o=o.replace(new RegExp(" "+t+'="{{(.+)}}"',"g")," doo-"+t+'="{{$1}}"')}));let n,h=l===o,d=o.split(t.default.DELIMITER.END),c=[],u=d.length;for(let e=0;e<u;e++)t.default.DELIMITER.BEG.includes(t.default.DELIMITER.BEG)&&(n=d[e].split(t.default.DELIMITER.BEG),c.push(n[0]),c.push(r(n[1],i)));return{templateArray:c,xHtml:h}}initReactiveDataNodes(i){const a=t=>{let e=0;for(;t.parentElement;)t=t.parentElement,e++;return e};this.dataMap=null,this.flex=null,this.hasAttribute("data-map")&&(0===this.getAttribute("data-map").indexOf("Doo.reflect")?this.dataMap=Reflect.ownKeys(e.default.DAO.getData(this.getAttribute(t.default.DATA_BIND))[0]):this.dataMap=this.getAttribute("data-map").split("|")),this.hasAttribute("flex")&&(this.flex=this.getAttribute("flex").replace("[","").replace("]","").split("|"));let r=i.content.querySelectorAll('[data-src="${data-map}"]');r.length>0&&[...r].forEach((t=>{let e=[];this.dataMap.forEach(((t,i)=>{let a=void 0===this.flex[i]?1:this.flex[i],r=t.split(":"),s=r.length>1?r[1]:r[0],o="";a.includes(":")&&(o=a.split(":").length>2?"doo-center":"doo-end",a=a.replace(/:/g,"")),e.push({label:s,fieldName:this.dynamicField(r[0]),flex:a,flexJustify:o})}));let i=this.htmlParse(t,e),a=t.parentElement;a.removeChild(t),a.innerHTML=i+a.innerHTML})),i.innerHTML=i.innerHTML.replace(/\$\{(.+?)\}/gm,((e,a)=>isNaN(a)?this.hasAttribute(a)?this.getAttribute(a):i.hasAttribute(a)?i.getAttribute(a):"":this.dataMap.length>0?t.default.DELIMITER.BEG+this.dataMap[a-1]+t.default.DELIMITER.END:void 0)),[...i.content.querySelectorAll("["+t.default.DATA_BIND+"]")].forEach((t=>{if(!t.hasAttribute("data-src")){let e=this.hasAttribute("doo-dispatch")?"Doo.DAO":"this.data";t.setAttribute("data-src",e)}}));let s,o,l=i.content.querySelectorAll("[data-src]"),n=l.length,h=0,d=[];for(h=0;h<n;h++){let e=l[h].getAttribute(t.default.DATA_BIND),i=l[h].getAttribute("data-src");i&&(this.setAttribute("doo-dispatch",e),o=i.trim()),0===i.indexOf("this.parent")&&(l[h].useParent=!0),l[h].removeAttribute("data-src"),l[h].level=a(l[h]),d.push(l[h])}for(this.removeAttribute("data-map"),this.removeAttribute("flex"),this.removeAttribute("data-fetch"),d.sort(((t,e)=>t.level===e.level?0:t.level>e.level?1:-1)).reverse(),h=0;h<n;h++){s="|STYLE|LINK|".indexOf(`|${d[h].tagName}|`)>-1?d[h]:d[h].parentElement&&("void"===l[h].getAttribute(t.default.DATA_BIND)||"|DL|UL|TBODY|THEAD|TFOOT|TR|SELECT|SECTION|".indexOf(`|${d[h].parentElement.tagName}|`)>-1)?d[h].parentElement:document.createElement("data"),s.dataKey=d[h].getAttribute(t.default.DATA_BIND);let e=this.dooParse(d[h],this,this.dataMap);s.templateArray=e.templateArray,s.xHtml=e.xHtml,s.name=h,s.level=a(d[h]),s.useParent=d[h].useParent,s.noRepeat=d[h].hasAttribute("data-norepeat"),"DATA"!==s.tagName&&"STYLE"!==s.tagName&&"LINK"!==s.tagName||(d[h].parentElement?d[h].parentElement.replaceChild(s,d[h]):(console.log("Warning: Templates should only have one childnode"),d[h].appendChild(s))),this.place.push(s)}return this.place}async setContext(){this.childNodes.length>0&&this.getElementsByTagName("template")&&this.getElementsByTagName("template").length>0&&this.removeChild(this.getElementsByTagName("template").item(0));let e=this.getAttribute("context")||t.default.SHADOW;if(e===t.default.SHADOW){this.componentContainer=this.shadow.host,this.showComponentContainer(!1);let t=this.templateElem.firstElementChild.hasAttribute("class")?" "+this.templateElem.firstElementChild.getAttribute("class"):"",e=this.hasAttribute("class")?this.getAttribute("class")+" ":"";e+t!==""&&this.templateElem.firstElementChild&&this.templateElem.firstElementChild.setAttribute("class",`${e}${t}`),this.shadow.appendChild(this.templateElem)}else e===t.default.DOCUMENT&&(this.componentContainer=this.parentElement,this.showComponentContainer(!1),this.componentContainer.replaceChild(this.templateElem,this));this.initialHeight=this.shadow.firstElementChild.offsetHeight}renderNode(t,e,i=0,a=3){let r=e.length,s=i+a,o=[];s>r&&(s=r);for(let a=i;a<s;a++)for(let i=0,r=t.templateArray.length;i<r;i+=2)o.push(t.templateArray[i]),t.templateArray[i+1]&&t.templateArray[i+1].fld&&o.push(_getItemValue(e[a],t.templateArray[i+1].fld));return o.join("")}showComponentContainer(t=!0){this.componentContainer.style.visibility=t?"visible":"hidden"}renderTable(t=this.data[this.defaultDataSet],e=this.place[0],i=0){let a=document.createElement("template"),r=t.length,s=r-1;a.innerHTML=this.renderNode(e,t,i,r-i);do{e.insertBefore(a.content.removeChild(a.content.lastElementChild),e.firstElementChild).key=t[s].id}while(--s>=0);this.showComponentContainer()}render(e=null,i=0,a=null){if(this.template){this.place||console.log("No target set on the component or inside the template. USAGE: set the bind=dataKey or data-src=data-key");for(let r=0,s=this.place.length;r<s;r++){if(e&&e!==this.place[r].dataKey)continue;if(0===i&&"STYLE"!==this.place[r].tagName&&!this.place[r].classList.contains("fhead")){let e="dummy"===this.place[r].getAttribute(t.default.DATA_BIND)?-1:0;this.place[r].setAttribute("page",e)}let s=this.place[r].dataKey,o=this.place[r].noRepeat?1:this.PAGE_SIZE;null===a?this.place[r].innerHTML=this.renderNode(this.place[r],s,i*this.PAGE_SIZE,o):this.place[r].append(this.renderNode(this.place[r],s,a,1))}return this.showComponentContainer(),i}console.log(this.name+" has no template defined")}async connectedCallback(){let t=e.default.$Config,i=this.getAttribute("context")||t.SHADOW;this.shadow=i===t.SHADOW?this.attachShadow({mode:"open"}):document,!this.defaultDataSet&&this.getAttribute("bind")&&(this.defaultDataSet=this.getAttribute("bind")),this.constructor.name.toLowerCase(),this.scrollTarget&&(this.scrollElem=this.shadow.querySelector(this.scrollTarget)),this.template=this.getAttribute("template"),this.templateNode=this.createDooTemplate(this.template,this,i,this.shadow),this.templateElem=this.templateNode.content,this.initReactiveDataNodes(this.templateNode),this.setContext(),"function"==typeof this.dooAfterRender&&await this.dooAfterRender()}}window.DooHTML||(r.DAO=i.default,window.DooHTML=r),e.default.define(r,"html")})()})();